(this.webpackJsonpcardwiever=this.webpackJsonpcardwiever||[]).push([[0],{17:function(e,t,r){e.exports={liked:"LikeButton_liked__1_zje",unliked:"LikeButton_unliked__3NAcs"}},18:function(e,t,r){e.exports={loader__container:"Loader_loader__container__3F-pH",loader:"Loader_loader__2VK6i",rotate:"Loader_rotate__2bQYB"}},19:function(e,t,r){e.exports={container:"MovieSvg_container__3lo4j"}},25:function(e,t,r){},30:function(e,t,r){},31:function(e,t,r){},33:function(e,t,r){},34:function(e,t,r){},36:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r(12),c=r.n(n),i=(r(25),r(10)),o="LOAD_DATA",s="LOAD_DATA_SUCCESS",d="LOAD_DATA_FAILURE",l="LOAD_COVER_FAILURE",u="DELETE_CARD",j="TOGGLE_LIKE",O="SET_FILTRED",b=(r(30),r(31),r(17)),p=r.n(b),f=r(3),_=function(e){var t=e.liked,r=e.handleClick;return Object(f.jsx)("div",{className:t?p.a.liked:p.a.unliked,onClick:r})},v=r(19),m=r.n(v),x=r.p+"static/media/movie.1c31fd83.svg",h=function(){return Object(f.jsx)("div",{className:m.a.container,children:Object(f.jsx)("img",{src:x,alt:"Cover"})})},y=function(e){var t=e.id,r=e.title,a=e.coverUrl,n=e.year,c=e.rating,o=e.liked,s=e.imgError,d=Object(i.b)();return Object(f.jsxs)("div",{className:"card__container",children:[s?Object(f.jsx)(h,{}):Object(f.jsx)("img",{src:a,alt:"Cover",className:"cover",onError:function(e){return function(e){e.target.onerror=null,d({type:l,payload:{id:t,error:!0}})}(e)}}),Object(f.jsxs)("div",{className:"card__description",children:[Object(f.jsx)("span",{children:r}),0!==n&&Object(f.jsx)("span",{children:"(".concat(n,")")}),Object(f.jsx)("span",{children:"Rating: ".concat(0!==c?c:"-")})]}),Object(f.jsx)("div",{className:"deleteButton",onClick:function(){d({type:u,payload:t})}}),Object(f.jsx)(_,{liked:o,handleClick:function(){d({type:j,payload:{id:t,liked:!o}})}})]})},g=(r(33),function(e){var t=e.data;return Object(f.jsx)("div",{className:"cardList",children:t.map((function(e){return Object(f.jsx)(y,{id:e.id,title:e.title,coverUrl:e.coverUrl,year:e.year,rating:e.rating,liked:e.liked,imgError:e.imgError},e.id)}))})}),k=r(18),L=r.n(k),E=function(){return Object(f.jsx)("div",{className:L.a.loader__container,children:Object(f.jsx)("div",{className:L.a.loader})})},w=(r(34),function(){return Object(f.jsx)("div",{className:"error__container",children:Object(f.jsx)("span",{children:"Loading error"})})});var N=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.app})),r=t.data,n=t.isLoading,c=t.error,s=t.filtred,d=Object(a.useMemo)((function(){return r.filter((function(e){return e.liked}))}),[r]);Object(a.useEffect)((function(){e({type:o})}),[e]);var l=function(t){e({type:O,payload:t})};return c?Object(f.jsx)(w,{}):Object(f.jsxs)("div",{className:"app__container",children:[Object(f.jsx)("h1",{className:"app__title",children:"Card Wiever"}),n?Object(f.jsx)(E,{}):Object(f.jsx)(g,{data:s?d:r}),s?Object(f.jsx)("button",{className:"filterButton",onClick:function(){return l(!1)},children:"Show all"}):Object(f.jsx)("button",{className:"filterButton",onClick:function(){return l(!0)},children:"Show liked"})]})},A=r(20),C=r(11),D=r(5),B=function(e){return e.map((function(e){var t={};return e.hasOwnProperty("id")&&(t.id=e.id),e.hasOwnProperty("title_english")?t.title=e.title_english:t.title=e.title,e.hasOwnProperty("year")&&(t.year=e.year),e.hasOwnProperty("rating")&&(t.rating=e.rating),e.hasOwnProperty("medium_cover_image")&&(t.coverUrl=e.medium_cover_image),t.liked=!1,t.imgError=null,t}))},S={data:[],isLoadings:!1,filtred:!1,error:null},T=Object(C.b)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:return Object(D.a)(Object(D.a)({},e),{},{isLoading:!0});case s:return Object(D.a)(Object(D.a)({},e),{},{isLoading:!1,data:B(t.payload.movies)});case d:return Object(D.a)(Object(D.a)({},e),{},{isLoading:!1,error:t.payload});case l:return Object(D.a)(Object(D.a)({},e),{},{data:e.data.map((function(e){return e.id===t.payload.id?Object(D.a)(Object(D.a)({},e),{},{imgError:t.payload.error}):e}))});case u:return Object(D.a)(Object(D.a)({},e),{},{data:e.data.filter((function(e){return e.id!==t.payload}))});case j:return Object(D.a)(Object(D.a)({},e),{},{data:e.data.map((function(e){return e.id===t.payload.id?Object(D.a)(Object(D.a)({},e),{},{liked:t.payload.liked}):e}))});case O:return Object(D.a)(Object(D.a)({},e),{},{filtred:t.payload});default:return e}}}),U=r(8),R=r.n(U),I=r(9),P=R.a.mark(G),F=R.a.mark(J);function G(){var e,t;return R.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(I.c)(fetch,"https://yts.mx/api/v2/list_movies.json?page=1&limit=20");case 3:return e=r.sent,r.next=6,Object(I.b)(e,e.json);case 6:return t=r.sent,r.next=9,Object(I.d)({type:s,payload:t.data});case 9:r.next=15;break;case 11:return r.prev=11,r.t0=r.catch(0),r.next=15,Object(I.d)({type:d,payload:r.t0});case 15:case"end":return r.stop()}}),P,null,[[0,11]])}function J(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.e)(o,G);case 2:case"end":return e.stop()}}),F)}var K=R.a.mark(M);function M(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.a)([J()]);case 2:case"end":return e.stop()}}),K)}var V=Object(A.a)(),z=Object(C.d)(T,Object(C.a)(V));V.run(M),c.a.render(Object(f.jsx)(i.a,{store:z,children:Object(f.jsx)(N,{})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.4ca90c52.chunk.js.map